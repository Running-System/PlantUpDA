<?xml version="1.0" encoding="UTF-8" standalone="yes"?><w:document xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:sl="http://schemas.openxmlformats.org/schemaLibrary/2006/main" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture" xmlns:c="http://schemas.openxmlformats.org/drawingml/2006/chart" xmlns:lc="http://schemas.openxmlformats.org/drawingml/2006/lockedCanvas" xmlns:dgm="http://schemas.openxmlformats.org/drawingml/2006/diagram" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:w15="http://schemas.microsoft.com/office/word/2012/wordml" xmlns:w16="http://schemas.microsoft.com/office/word/2018/wordml" xmlns:w16cex="http://schemas.microsoft.com/office/word/2018/wordml/cex" xmlns:w16cid="http://schemas.microsoft.com/office/word/2016/wordml/cid" xmlns="http://schemas.microsoft.com/office/tasks/2019/documenttasks" xmlns:cr="http://schemas.microsoft.com/office/comments/2020/reactions"><w:body><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000001"><w:pPr><w:pStyle w:val="Heading1"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="46"/><w:szCs w:val="46"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_w2no8wxqmxt9" w:id="0"/><w:bookmarkEnd w:id="0"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="46"/><w:szCs w:val="46"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">IoT Data Sync in Microservices: Evaluating MQTT vs. REST</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000002"><w:pPr><w:pStyle w:val="Heading2"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="80" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_khviy55zg43l" w:id="1"/><w:bookmarkEnd w:id="1"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">1. Introduction</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000003"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_4fuu5rwobamo" w:id="2"/><w:bookmarkEnd w:id="2"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">1.1 Background and Context</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000004"><w:pPr><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The integration of the Internet of things (IoT) into our lives has been rapid, especially in the agricultural sector which has started a transformation known as “Agriculture 4.0”, where data-driven decision making replaces traditional heuristic methods [1]. While industrial has benefited form that shift, a parallel trend is emerging in the consumer sector. Smart Urban gardening [2]. Driven by rapid urbanization and growing societal focus on sustainability, this sector is experiencing significant growth [3]. This surge represents a shift toward the Social Internet of Things (SIoT) [4]. In the SIoT paradigm, objects are capable of establishing social relationships with other objects and humans to foster collaboration[5] However, applying these advanced concepts to consumer grade hardware presents architectural challenges [6]. Unlike industrial systems, consumer IoT devices for plant care must operate in resource constrained environments, reyling on batteries and communicating over congested residential Wi-Fi [7].</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000005"><w:pPr><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000006"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_ng7ekxvv5dwo" w:id="3"/><w:bookmarkEnd w:id="3"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">1.2 Case Study: The &quot;Plant Up!&quot; Project</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000007"><w:pPr><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">This thesis utilizes the “Plant Up!” project as a primary case study to investigate architecural frictions [8]. “Plant Up!” is an IoT application designed to gamify the experience of plant care [9]. The system combines hardware sensor units (IoT devices), cloud services and a mobile app to monitor soil moisture, temperature, humidity, light levels and other metrics in real time. The codebase relies on a three tier architecture: edge layer (esp32), the microservices layer and the Application layer [11].</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000008"><w:pPr><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000009"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_iobit831gmev" w:id="4"/><w:bookmarkEnd w:id="4"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">1.3 Problem Statement</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000000A"><w:pPr><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The design of a real time social plant monitoring system with gamification aspects introduces a conflict between latency, energy efficiency and data consistency [12]. The “Social” aspect relies on gamification mechanics that require low latency data transmission [13]. However, the hardware must utilize aggressive power saving states and techniques to be practical for home use [14]. Research indicates that while deep sleep extends battery life, the wake up and following processes cause latency that conflicts with real time requirements [15]. Furthermore, the choice of communication protocol dictates the “wake up tax” of the device [16]. Traditional web protocols like HTTP are robust but carry significant header overhead, whereas lightweight protocols like MQTT are designed for exactly that missing efficiency [17]. Additionally, maintaining a consistent view of the system state in a distributed architecture is non trivial, as the CAP theorem dictates trade offs between Consistency, Partition tolerance and Availability [18]</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000000B"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_jhlg8gjpav4s" w:id="5"/><w:bookmarkEnd w:id="5"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000000C"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_ts8pc18ejcmf" w:id="6"/><w:bookmarkEnd w:id="6"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000000D"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_m5r8c5pgzmdx" w:id="7"/><w:bookmarkEnd w:id="7"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000000E"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_jsh1v7ot8rul" w:id="8"/><w:bookmarkEnd w:id="8"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">1.4 Research Question</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000000F"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">To address these challenges, this thesis poses the following primary research question:</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000010"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="9"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/><w:rPr><w:u w:val="none"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">How do MQTT and REST compare in a microservices-based architecture for real-time plant monitoring, specifically regarding latency, throughput, and data consistency, when constrained by battery-powered IoT devices [19]? </w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000011"><w:pPr><w:pStyle w:val="Heading2"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="80" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_7euhx69hj5vd" w:id="9"/><w:bookmarkEnd w:id="9"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2. Theoretical Background</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000012"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_erhspdvsbw0k" w:id="10"/><w:bookmarkEnd w:id="10"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.1 Microservices Architecture (MSA)</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000013"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Microservices Architecture (MSA) represents a shift in software design, moving away from monolithic architectures toward the decomposition of applications into multiple small services [20]. For &quot;Plant Up!&quot;, a monolithic approach would be detrimental due to inefficient scaling [21]. MSA defines the application as a suite of small services, each running in its own process, enabling distinct services such as Dashboard, Notification, Processing, and Ingestion services to function separately [22].</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000014"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_6vx0ypsbl2j4" w:id="11"/><w:bookmarkEnd w:id="11"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.2 Core Characteristics of Microservices in IoT</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000015"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Services are independently deployable components, allowing for the evolution of the cloud platform without requiring firmware updates on edge devices [23]. Unlike monoliths, MSA encourages &quot;Database per Service,&quot; ensuring services are loosely coupled in state [24]. For instance, the Notification Service might use a Time-Series Database like InfluxDB, while the User Service uses a Relational Database [25]. This necessitates reliance on eventual consistency models [26]. Furthermore, the system must handle dynamic loads through containerization and orchestration, allowing services to auto-scale based on traffic [27].</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000016"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_xgou8hlgskk2" w:id="12"/><w:bookmarkEnd w:id="12"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.3 JSON Payload Design</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000017"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Communication typically occurs via synchronous REST APIs or asynchronous messaging using JSON serialization [28]. Standardizing the data contract is vital [29].</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000018"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:jc w:val="center"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr><w:drawing><wp:inline distB="114300" distT="114300" distL="114300" distR="114300"><wp:extent cx="3986213" cy="2887024"/><wp:effectExtent b="0" l="0" r="0" t="0"/><wp:docPr id="3" name="image4.png"/><a:graphic><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic><pic:nvPicPr><pic:cNvPr id="0" name="image4.png"/><pic:cNvPicPr preferRelativeResize="0"/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId6"/><a:srcRect b="0" l="0" r="0" t="0"/><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="3986213" cy="2887024"/></a:xfrm><a:prstGeom prst="rect"/><a:ln/></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000019"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">In contrast, a RESTful response from the </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Dashboard Service</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> to a user's browser might utilize HATEOAS (Hypermedia as the Engine of Application State) to guide the client through the application state, a core tenet of RESTful theory.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000001A"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:jc w:val="center"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr><w:drawing><wp:inline distB="114300" distT="114300" distL="114300" distR="114300"><wp:extent cx="3662363" cy="1752094"/><wp:effectExtent b="0" l="0" r="0" t="0"/><wp:docPr id="1" name="image2.png"/><a:graphic><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic><pic:nvPicPr><pic:cNvPr id="0" name="image2.png"/><pic:cNvPicPr preferRelativeResize="0"/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId7"/><a:srcRect b="0" l="0" r="0" t="0"/><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="3662363" cy="1752094"/></a:xfrm><a:prstGeom prst="rect"/><a:ln/></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000001B"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_sj2s43e48b9j" w:id="13"/><w:bookmarkEnd w:id="13"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.2.4 Challenges of MSA in IoT</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000001C"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">While MSA offers scalability, it introduces significant complexity, particularly for IoT applications like &quot;Plant Up!&quot;.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000001D"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="2"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Network Latency</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: In a monolith, communication is in-memory function calls. In MSA, communication is over the network. Each &quot;hop&quot; between services adds latency. If a user requests a plant status, the Dashboard Service might call the Plant Service, which calls the Database, adding milliseconds of network overhead at each step [30].</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000001E"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="2"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Distributed Tracing</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Debugging a failure requires tracing a request across multiple service boundaries. If the &quot;Plant Up!&quot; dashboard shows outdated data, the error could be in the sensor, the MQTT broker, the Ingestion Service, or the Database. Tools and patterns for correlated logging (using </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">trace_id</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> as seen in the JSON example) are mandatory [31].</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000001F"><w:pPr><w:pStyle w:val="Heading2"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="80" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_u6cdahfg368b" w:id="14"/><w:bookmarkEnd w:id="14"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.3 Internet of Things (IoT) Constraints and Hardware</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000020"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_chqa9nwncat2" w:id="15"/><w:bookmarkEnd w:id="15"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.3.1 The ESP32 Microcontroller Architecture</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000021"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The &quot;Plant Up!&quot; project relies on the ESP32, a low-cost, low-power system on a chip (SoC) developed by Espressif Systems. It features a dual-core Xtensa® 32-bit LX6 microprocessor, integrated Wi-Fi (802.11 b/g/n), and dual-mode Bluetooth [33] Theoretical analysis of the ESP32's power architecture is critical because the choice of software protocol (MQTT vs. REST) directly dictates the hardware's active duration, which is the main factor in battery life.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000022"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The ESP32 operates in several power modes, each with distinct consumption profiles [33]:</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000023"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Active Mode</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The CPU, radio (Wi-Fi/BT), and peripherals are fully powered. In this state, the device consumes between </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">160mA and 260mA</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> when transmitting (Tx) and </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">80mA-90mA</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> when receiving (Rx) [34]. This is the most expensive state.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000024"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Light Sleep</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The CPU is paused, and the clock is gated, but RAM is retained. Wake-up is rapid (&lt;1ms). Consumption is approx </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">0.8mA</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> [33].</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000025"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Modem Sleep</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The CPU is active, but the Wi-Fi/Bluetooth radio baseband is disabled. Consumption drops to </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">20mA-30mA</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> [35]. This mode is used when processing data locally without transmitting.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000026"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="12"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Deep Sleep</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: This is the critical mode for &quot;Plant Up!&quot;. The CPU, Wi-Fi, Bluetooth, and most RAM are powered down. Only the ULP (Ultra-Low Power) coprocessor and the RTC (Real-Time Clock) controller remain active. Consumption drops to </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">10µA–150µA</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> [33]. </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Hibernation</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Everything is off except the RTC timer. Consumption is </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">~5µA </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">[33].</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000027"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_vg7lgm7qahfj" w:id="16"/><w:bookmarkEnd w:id="16"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.3.2 Energy Management Theory: The Duty Cycle</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000028"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:jc w:val="center"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr/><w:drawing><wp:inline distB="114300" distT="114300" distL="114300" distR="114300"><wp:extent cx="4805363" cy="1588484"/><wp:effectExtent b="0" l="0" r="0" t="0"/><wp:docPr id="5" name="image3.png"/><a:graphic><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic><pic:nvPicPr><pic:cNvPr id="0" name="image3.png"/><pic:cNvPicPr preferRelativeResize="0"/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId8"/><a:srcRect b="0" l="0" r="0" t="0"/><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="4805363" cy="1588484"/></a:xfrm><a:prstGeom prst="rect"/><a:ln/></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000029"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Connection Overhead</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The ESP32 does not maintain a Wi-Fi connection in Deep Sleep. Upon waking, it must re-associate with the Access Point (AP) and acquire an IP address via DHCP. This process typically takes </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">1 to 3 seconds</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">, consuming </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">~100-150mA</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> on average [36]. This &quot;connection tax&quot; is paid regardless of the application layer protocol.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000002A"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="3"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Protocol Handshake</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">:</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000002B"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="3"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="1440" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">REST/HTTPS</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Requires a TCP handshake (SYN, SYN-ACK, ACK) followed by a TLS handshake (ClientHello, ServerHello, Certificate Exchange, Key Exchange). This involves multiple round-trips (RTT) before data is sent.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000002C"><w:pPr><w:numPr><w:ilvl w:val="1"/><w:numId w:val="3"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="1440" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">MQTT (Secure)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Also requires TCP and TLS handshakes to establish the secure tunnel. However, if the device stays awake (Modem Sleep) and maintains the connection, subsequent messages have zero handshake overhead. If the device Deep Sleeps (breaking the connection), MQTT </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:i w:val="1"/><w:iCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">also</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> requires a </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">CONNECT</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> packet handshake upon waking [37].</w:t><w:br w:type="textWrapping"/></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000002D"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_bdwiz1d1n9a2" w:id="17"/><w:bookmarkEnd w:id="17"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.3.3 Deep Sleep and Memory Constraints</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000002E"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">In Deep Sleep, the main SRAM is volatile. The ESP32 provides a small </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">8KB RTC Slow Memory</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> that retains data during deep sleep [38]. This allows for &quot;Store and Forward&quot; architectures where the &quot;Plant Up!&quot; device wakes up, reads a sensor, stores the value in RTC memory, and goes back to sleep </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:i w:val="1"/><w:iCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">without</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> turning on the Wi-Fi. After </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">n</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> cycles, it wakes up fully, connects, and bulk-uploads data. This strategy amortizes the high energy cost of the Wi-Fi connection over multiple readings.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000002F"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="0" w:firstLine="0"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The &quot;Plant Up!&quot; firmware must carefully manage this memory. While REST is stateless, MQTT libraries often require state (packet IDs, session flags). Implementing robust MQTT on the ESP32 requires handling the loss of this state if the device enters Deep Sleep, often necessitating the use of the </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">cleanSession=false</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> flag or explicit state saving in RTC memory [39].</w:t><w:br w:type="textWrapping"/></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000030"><w:pPr><w:pStyle w:val="Heading2"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="80" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_k5fwle1vk737" w:id="18"/><w:bookmarkEnd w:id="18"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4 Communication Protocols: MQTT vs. REST</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000031"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The selection of the communication protocol is the pivotal technical decision for the &quot;Plant Up!&quot; data synchronization layer, influencing energy efficiency, data latency, and reliability.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000032"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_aq7jmwyvz2vh" w:id="19"/><w:bookmarkEnd w:id="19"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.1 MQTT (Message Queuing Telemetry Transport)</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000033"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">MQTT is a lightweight, binary, publish-subscribe messaging protocol running on top of TCP/IP, standardized by ISO/IEC 20922. It was explicitly designed for bandwidth-constrained and unreliable networks, making it a strong candidate for agricultural IoT.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">20</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000034"><w:pPr><w:pStyle w:val="Heading4"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="40" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_p4nz5161hesx" w:id="20"/><w:bookmarkEnd w:id="20"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.1.1 Publish-Subscribe Architecture</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000035"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Unlike the point-to-point nature of REST, MQTT utilizes a </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Broker</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> to decouple clients.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000036"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Decoupling</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The &quot;Plant Up!&quot; sensor (Publisher) sends data to a topic (e.g., </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">plantup/nursery/sensor01/moisture</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">). It does not know who consumes this data. The Broker routes this message to the </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Ingestion Service</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> (Subscriber).</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">20</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000037"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="7"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Space and Time Decoupling</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The Publisher and Subscriber do not need to be online simultaneously (if persistent sessions are used). This supports the &quot;Plant Up!&quot; requirement for intermittent connectivity.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000038"><w:pPr><w:pStyle w:val="Heading4"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="40" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_5ctby77lf53k" w:id="21"/><w:bookmarkEnd w:id="21"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.1.2 Packet Structure and Overhead</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000039"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">MQTT is binary-encoded. The fixed header is only </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2 bytes</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">16</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000003A"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="5"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Byte 1: Packet Type (4 bits) + Flags (4 bits).</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000003B"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="5"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Byte 2: Remaining Length.</w:t><w:br w:type="textWrapping"/><w:t xml:space="preserve">This minimal overhead contrasts sharply with HTTP, where text-based headers (User-Agent, Content-Type, Authorization) can easily exceed 500 bytes per request, even for a 10-byte payload. For a cellular-connected &quot;Plant Up!&quot; sensor, this overhead reduction translates directly to data cost savings and reduced radio-on time.22</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000003C"><w:pPr><w:pStyle w:val="Heading4"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="40" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_wv2at6zusg" w:id="22"/><w:bookmarkEnd w:id="22"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.1.3 Quality of Service (QoS) Levels</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000003D"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">MQTT provides three distinct levels of message delivery guarantees, allowing &quot;Plant Up!&quot; to balance reliability against energy cost </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">20</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">:</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000003E"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">QoS 0 (At most once)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: &quot;Fire and forget.&quot; The message is transmitted, and no acknowledgment is expected. This is the most energy-efficient but risks data loss. It is suitable for periodic soil moisture readings where a missing data point is not critical.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000003F"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">QoS 1 (At least once)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Ensures delivery. The sender stores the message and waits for a </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">PUBACK</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">. If not received, it retransmits. This is ideal for critical alerts (e.g., &quot;Pump Failure&quot;), though it requires idempotency handling in the microservice to manage duplicates.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000040"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="4"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">QoS 2 (Exactly once)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Uses a four-step handshake (</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">PUBLISH</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">PUBREC</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">PUBREL</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">, </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">PUBCOMP</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">). This incurs significant latency and network overhead and is generally too heavy for battery-powered ESP32 sensors.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000041"><w:pPr><w:pStyle w:val="Heading4"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="40" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_m096in84jc6u" w:id="23"/><w:bookmarkEnd w:id="23"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.1.4 MQTT Implementation on ESP32</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000042"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The following code snippet illustrates the use of the </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">PubSubClient</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> library for &quot;Plant Up!&quot;. It demonstrates the connection logic and publishing mechanism. The </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">loop()</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> function is critical for maintaining the connection and processing incoming </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">SUBACK</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> or </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">PUBACK</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> messages.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000043"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:jc w:val="center"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr><w:drawing><wp:inline distB="114300" distT="114300" distL="114300" distR="114300"><wp:extent cx="5094828" cy="9424988"/><wp:effectExtent b="0" l="0" r="0" t="0"/><wp:docPr id="4" name="image5.png"/><a:graphic><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic><pic:nvPicPr><pic:cNvPr id="0" name="image5.png"/><pic:cNvPicPr preferRelativeResize="0"/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId9"/><a:srcRect b="0" l="0" r="0" t="0"/><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="5094828" cy="9424988"/></a:xfrm><a:prstGeom prst="rect"/><a:ln/></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000044"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:i w:val="1"/><w:iCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Analysis</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">client.loop()</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> function is blocking in nature regarding network processing. If the connection is lost, </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">reconnect()</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> blocks execution. For Deep Sleep applications, the connection is torn down every cycle, meaning the </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">reconnect()</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> logic runs on every wake-up, incurring the full handshake cost.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">24</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000045"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_ajx5vvfbezqn" w:id="24"/><w:bookmarkEnd w:id="24"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.2 REST (Representational State Transfer)</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000046"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">REST is an architectural style that utilizes the existing features of the web (HTTP) for communication. It is the standard for web APIs and integrates seamlessly with web-based microservices.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000047"><w:pPr><w:pStyle w:val="Heading4"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="40" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_5h608dm5f5m2" w:id="25"/><w:bookmarkEnd w:id="25"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.2.1 Request-Response Model</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000048"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">REST is synchronous. The ESP32 sends a request (e.g., </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">POST /readings</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">) and waits for a response.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000049"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Statelessness</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The server retains no session information. Each request must contain authentication tokens (e.g., JWT) and all context. This simplifies the server-side architecture for &quot;Plant Up!&quot; but increases the data payload size per message.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000004A"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="1"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Simplicity</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: REST over HTTP is text-based and easy to debug. It maps CRUD operations (Create, Read, Update, Delete) to HTTP verbs (POST, GET, PUT, DELETE).</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">26</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000004B"><w:pPr><w:pStyle w:val="Heading4"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="40" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_wdjki59ooe8p" w:id="26"/><w:bookmarkEnd w:id="26"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.2.2 Performance and Energy Implications</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000004C"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Header Bloat</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: As noted, HTTP headers are verbose.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000004D"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">TCP Efficiency</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: HTTP/1.1 allows for </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Keep-Alive</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> connections to reuse the TCP socket for multiple requests. However, if the ESP32 sleeps for 10 minutes between readings, the TCP socket will timeout (typically 60s-120s server-side), rendering </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Keep-Alive</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> useless. Thus, every reading requires a new TCP and TLS handshake.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000004E"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="10"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Latency</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The request-response nature implies a Round Trip Time (RTT) dependency. High latency on a cellular network directly extends the radio-on time.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">16</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000004F"><w:pPr><w:pStyle w:val="Heading4"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:after="40" w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_a7zw6pp15vgv" w:id="27"/><w:bookmarkEnd w:id="27"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="22"/><w:szCs w:val="22"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.2.3 REST Implementation on ESP32</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000050"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The comparative REST implementation uses the </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">HTTPClient</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> library. This approach is conceptually simpler but requires explicit management of the JSON string construction.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000051"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:jc w:val="center"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr><w:drawing><wp:inline distB="114300" distT="114300" distL="114300" distR="114300"><wp:extent cx="5731200" cy="8610600"/><wp:effectExtent b="0" l="0" r="0" t="0"/><wp:docPr id="2" name="image1.png"/><a:graphic><a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture"><pic:pic><pic:nvPicPr><pic:cNvPr id="0" name="image1.png"/><pic:cNvPicPr preferRelativeResize="0"/></pic:nvPicPr><pic:blipFill><a:blip r:embed="rId10"/><a:srcRect b="0" l="0" r="0" t="0"/><a:stretch><a:fillRect/></a:stretch></pic:blipFill><pic:spPr><a:xfrm><a:off x="0" y="0"/><a:ext cx="5731200" cy="8610600"/></a:xfrm><a:prstGeom prst="rect"/><a:ln/></pic:spPr></pic:pic></a:graphicData></a:graphic></wp:inline></w:drawing></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000052"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:i w:val="1"/><w:iCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Analysis</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">http.begin</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> and </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">http.end</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> sequence indicates a fresh connection setup and teardown. While simpler to implement than the MQTT state machine, the overhead of establishing the secure channel (</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:color w:val="188038"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">WiFiClientSecure</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">) on every loop is significant in terms of energy.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">27</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000053"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_1736oo7zyz8o" w:id="28"/><w:bookmarkEnd w:id="28"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.4.3 Comparative Summary</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000054"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The theoretical comparison suggests a divergence in suitability based on use case.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000055"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:sz w:val="34"/><w:szCs w:val="34"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.5 Data Consistency and the CAP Theorem</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000056"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Integrating distributed IoT data into a microservices architecture introduces complex challenges regarding the consistency of the system's state. When a &quot;Plant Up!&quot; sensor reports a critical moisture drop, how quickly does that data propagate to the alert service, and can we guarantee every service sees the same data simultaneously?</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000057"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_fbbpoye7zks7" w:id="29"/><w:bookmarkEnd w:id="29"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.5.1 The CAP Theorem Definition</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000058"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The CAP Theorem, formulated by Eric Brewer, posits that in any distributed data store, it is impossible to simultaneously provide more than two of the following three guarantees </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">8</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">:</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000059"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Consistency (C)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Every read receives the most recent write or an error. In &quot;Plant Up!&quot;, this implies that if Sensor A reports 10% moisture, the Dashboard Service, Notification Service, and Automation Service all see 10% immediately.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000005A"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Availability (A)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Every request receives a (non-error) response, without the guarantee that it contains the most recent write. This means the system stays up and responsive even if some data is not yet synchronized.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000005B"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="11"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Partition Tolerance (P)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The system continues to operate despite an arbitrary number of messages being dropped or delayed by the network.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000005C"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_uc7skc4n40io" w:id="30"/><w:bookmarkEnd w:id="30"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.5.2 Applying CAP to &quot;Plant Up!&quot;</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000005D"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">In the context of IoT and Wireless Sensor Networks (WSN), </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Partition Tolerance (P)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> is a non-negotiable reality. Wireless signals in a greenhouse can be blocked by foliage, metal structures, or interference, creating network partitions where sensors cannot reach the cloud broker.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">30</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000005E"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Therefore, the architectural choice is reduced to </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">CP</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> vs. </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">AP</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">:</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000005F"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">CP (Consistency + Partition Tolerance)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: If the network is partitioned, the system refuses to accept new data or serve requests to prevent inconsistency. For &quot;Plant Up!&quot;, this would mean if the cloud database cannot replicate data to a secondary node, the Ingestion Service would reject incoming sensor readings. This is unacceptable, as data loss (missing a drought event) is a greater risk than reading slightly stale data.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000060"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="6"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">AP (Availability + Partition Tolerance)</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: The system prioritizes accepting data and serving requests. If a partition occurs, the Ingestion Service accepts the sensor reading and stores it locally or in a queue, synchronizing with the rest of the system later. The Dashboard might show old data for a few seconds, but the system remains functional.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">8</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000061"><w:pPr><w:pStyle w:val="Heading3"/><w:keepNext w:val="0"/><w:keepLines w:val="0"/><w:spacing w:before="0" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/></w:rPr></w:pPr><w:bookmarkStart w:colFirst="0" w:colLast="0" w:name="_fa640x93oltt" w:id="31"/><w:bookmarkEnd w:id="31"/><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:color w:val="000000"/><w:sz w:val="26"/><w:szCs w:val="26"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">2.5.3 Eventual Consistency in IoT</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000062"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Given the necessity of an </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">AP</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> design, &quot;Plant Up!&quot; adopts the model of </w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Eventual Consistency</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">. This model guarantees that if no new updates are made to a given data item, eventually all accesses to that item will return the last updated value.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">32</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000063"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">The &quot;Plant Up!&quot; architecture manages this via the MQTT Broker and the Microservices event bus:</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000064"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Write Path</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Sensor publishes to MQTT -&gt; Ingestion Service picks up message -&gt; Writes to Supabase (Primary Write).</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000065"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr><w:spacing w:after="0" w:afterAutospacing="0" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Read Path</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Dashboard reads from a Redis Cache.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000066"><w:pPr><w:numPr><w:ilvl w:val="0"/><w:numId w:val="8"/></w:numPr><w:spacing w:after="240" w:lineRule="auto"/><w:ind w:left="720" w:hanging="360"/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Synchronization</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: An asynchronous process updates the Redis Cache from Supabase.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000067"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">There is a window of inconsistency ($t_{inconsistency}$) between step 1 and step 3. During this window, a user might see the old moisture level. However, for environmental monitoring, a latency of seconds is acceptable, validating the AP approach.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000068"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">Conflict Resolution</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">: Challenges arise in bi-directional control. If a user sends a &quot;Turn Pump ON&quot; command via REST (Dashboard), and an automated rule sends a &quot;Turn Pump OFF&quot; command via MQTT (Processing Service) simultaneously, a conflict occurs. Theoretical resolution strategies include &quot;Last Write Wins&quot; (LWW) based on high-precision timestamps, or Vector Clocks to determine causality.</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:sz w:val="40"/><w:szCs w:val="40"/><w:vertAlign w:val="superscript"/><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve">32</w:t></w:r><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr><w:t xml:space="preserve"> For &quot;Plant Up!&quot;, LWW is typically sufficient given the relatively slow physical dynamics of soil moisture.</w:t></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="00000069"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr/></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000006A"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:p w:rsidR="00000000" w:rsidDel="00000000" w:rsidP="00000000" w:rsidRDefault="00000000" w:rsidRPr="00000000" w14:paraId="0000006B"><w:pPr><w:spacing w:after="240" w:lineRule="auto"/><w:jc w:val="center"/><w:rPr><w:b w:val="1"/><w:bCs w:val="1"/></w:rPr></w:pPr><w:r w:rsidDel="00000000" w:rsidR="00000000" w:rsidRPr="00000000"><w:rPr><w:rtl w:val="0"/></w:rPr></w:r></w:p><w:sectPr><w:pgSz w:h="16834" w:w="11909" w:orient="portrait"/><w:pgMar w:bottom="1440" w:top="1440" w:left="1440" w:right="1440" w:header="720" w:footer="720"/><w:pgNumType w:start="1"/></w:sectPr></w:body></w:document>